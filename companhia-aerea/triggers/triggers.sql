    CREATE OR REPLACE FUNCTION T_VALIDACAO_USUARIO()
    RETURNS TRIGGER AS $$
    BEGIN
        IF NOT VALIDAR_EMAIL(NEW.EMAIL) THEN
            RAISE EXCEPTION 'E-mail % é inválido.', NEW.EMAIL;
        END IF;

        IF NOT VALIDAR_TELEFONE(NEW.TELEFONE) THEN
            RAISE EXCEPTION 'Telefone % é inválido.', NEW.TELEFONE;
        END IF;

        IF NOT VALIDAR_CPF(NEW.CPF) THEN
            RAISE EXCEPTION 'CPF % é inválido.', NEW.CPF;
        END IF;

        RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    CREATE OR REPLACE TRIGGER TRIGGER_VALIDACAO_USUARIO BEFORE INSERT OR UPDATE ON USUARIO FOR EACH ROW EXECUTE PROCEDURE T_VALIDACAO_USUARIO();
